{% extends 'base.html' %}

{% block content %}
<div class="fade-in">
    <div style="text-align: center; margin-bottom: 50px; max-width: 600px; margin-left: auto; margin-right: auto;">
        <h2 style="font-size: 2.5rem; margin-bottom: 16px;">Available Surplus Food</h2>
        <p style="color: var(--gray); font-size: 1.1rem; margin-bottom: 30px;">Browse fresh, high-quality surplus food
            from our partner hotels.</p>

        <!-- Search Placeholder -->
        <div style="position: relative;">
            <input type="text" placeholder="Search by food type or location..."
                style="padding-left: 50px; box-shadow: var(--shadow-md); border: none;">
            <span
                style="position: absolute; left: 20px; top: 50%; transform: translateY(-50%); font-size: 1.2rem;">üîç</span>
        </div>
    </div>

    <div class="grid">
        {% for food in foods %}
        <div class="card food-card" style="padding: 0; overflow: hidden;">
            <div style="position: relative;">
                {% if food.image %}
                <img src="{{ food.image.url }}" alt="{{ food.title }}"
                    style="width: 100%; height: 220px; object-fit: cover; margin: 0;">
                {% else %}
                <div
                    style="height: 220px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; margin: 0;">
                    <span style="font-size: 4rem;">üç≤</span>
                </div>
                {% endif %}
                <span class="badge badge-expiry"
                    style="position: absolute; top: 16px; right: 16px; background: rgba(255,255,255,0.9); backdrop-filter: blur(4px);">Exp:
                    {{ food.expiry_time|date:"M d, H:i" }}</span>
            </div>

            <div style="padding: 24px;">
                <h3 style="font-size: 1.4rem; margin-bottom: 8px;">{{ food.title }}</h3>
                <p
                    style="color: var(--gray); font-size: 0.9rem; margin-bottom: 16px; display: flex; align-items: center;">
                    <span style="margin-right: 6px;">üè®</span> {{ food.donor.username }}
                </p>

                <div style="display: flex; gap: 8px; margin-bottom: 20px;">
                    <span class="badge badge-hotel">{{ food.quantity }} Servings</span>
                    {% if food.is_veg %}
                    <span class="badge" style="background: rgba(46, 204, 113, 0.15); color: #2ecc71;">Veg</span>
                    {% else %}
                    <span class="badge" style="background: rgba(231, 76, 60, 0.15); color: #e74c3c;">Non-Veg</span>
                    {% endif %}
                </div>



                <a href="{% url 'food_detail' food.pk %}" class="btn btn-outline"
                    style="width: 100%; text-align: center; border-radius: 12px; padding: 12px;">View Details</a>
            </div>
        </div>
        {% empty %}
        <div style="grid-column: 1 / -1; text-align: center; padding: 60px 0; opacity: 0.7;">
            <div style="font-size: 5rem; margin-bottom: 20px;">ü•¨</div>
            <h3>No food available right now</h3>
            <p>Our hotel partners update listings frequently. Please check back later.</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}